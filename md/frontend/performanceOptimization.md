# 性能优化
网络耗时、页面加载耗时、脚本执行耗时、渲染耗时等耗时情况会影响用户的等待时长，而 CPU 占用、内存占用、本地缓存占用等则可能会导致页面卡顿甚至卡死。
- 将其称为“时间”和“空间”两个维度
## 时间角度优化：减少耗时
页面加载过程中，会进行以下的步骤：

- 网络请求相关（发起 HTTP 请求从服务端获取页面资源，包括 HTML/CSS/JS/图片资源等）
- 浏览器解析 HTML 和渲染页面
- 加载 Javascript 代码时会暂停页面渲染（包括解析到外部资源，会发起 HTTP 请求获取并加载）

在浏览器的首次加载和渲染完成之后，不代表用户就可以马上交互和操作。根据业务代码加载过程，页面还会分别进入页面开始渲染、渲染完成、用户可交互等阶段。除此之外，页面交互过程中，会根据业务逻辑进行逻辑运算、页面更新。

四个方面进行耗时优化：
- 网络请求优化。
- 首屏加载优化。
- 渲染过程优化。
- 计算/逻辑运行提速。
1. 网络请求优化
> 网络请求优化的目标在于减少网络资源的请求和加载耗时
> 1. 请求链路：DNS 查询、部署 CDN 节点、缓存等。
> 2. 数据大小：代码大小、图片资源等。

2. 首屏加载优化
> 1. 将页面内容尽快地展示给用户，减少页面白屏时间。
> 2. 将用户可操作的时间尽量提前，避免用户无法操作的卡顿体验。
``` descriptor
- 对页面的内容进行分片/分屏加载
- 仅加载需要的资源，通过异步或是懒加载的方式加载剩余资源
- 使用骨架屏进行预渲染
- 使用差异化服务，比如读写分离，对于不同场景按需加载所需要的模块
- 使用服务端直出渲染，减少页面二次请求和渲染的耗时
```
3. 